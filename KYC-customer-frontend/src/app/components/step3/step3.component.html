<div class="kyc-container">
  <mat-card class="kyc-card">
    <div class="header-content">
      <div class="header-left">
        <div class="header-icon">
          <mat-icon>mail</mat-icon>
        </div>
        <div class="header-text">
          <h2>Contact Information</h2>
          <p>Please provide your email address for verification</p>
        </div>
      </div>
      <div class="completion-indicator">
        <div class="progress-circle">
          <svg width="40" height="40">
            <circle class="progress-ring-bg" cx="20" cy="20" r="16" />
            <circle class="progress-ring-circle" cx="20" cy="20" r="16" 
                    [style.strokeDasharray]="100.5"
                    [style.strokeDashoffset]="0" />
          </svg>
          <span class="percentage">100%</span>
        </div>
        <div class="step-text">
          <span class="current-step">Step 3 of 3</span>
          <span class="step-label">Final Step</span>
        </div>
      </div>
    </div>

    <app-step-progress [currentStep]="3"></app-step-progress>

    <form [formGroup]="emailForm" class="form-section">
      <div class="form-header">
        <h3 class="form-title">Email Address</h3>
        <p class="form-description">We'll send you important updates and notifications here</p>
      </div>

      <mat-form-field appearance="outline">
        <mat-label>Email address</mat-label>
        <input matInput 
               formControlName="email" 
               type="email" 
               placeholder="e.g., name@example.com">
        <mat-icon matSuffix>mail</mat-icon>
        <mat-hint>We'll never share your email with anyone else</mat-hint>
        <mat-error *ngIf="emailForm.get('email')?.hasError('required')">
          Email address is required
        </mat-error>
        <mat-error *ngIf="emailForm.get('email')?.hasError('email')">
          Please enter a valid email address
        </mat-error>
      </mat-form-field>

      <div class="action-buttons">
        <button mat-stroked-button 
                class="back-button nav-button" 
                type="button"
                [disabled]="isSubmitting"
                (click)="onBack()"
                aria-label="Back button">
          <mat-icon>arrow_back</mat-icon>
          Back
        </button>
        <button mat-flat-button 
                color="primary" 
                class="next-button nav-button" 
                type="submit"
                [disabled]="emailForm.invalid || isSubmitting"
                (click)="onSubmit()"
                aria-label="Submit button">
          <span>Submit</span>
          <mat-icon *ngIf="!isSubmitting">send</mat-icon>
          <mat-spinner *ngIf="isSubmitting" diameter="20"></mat-spinner>
        </button>
      </div>
    </form>
  </mat-card>
</div>
